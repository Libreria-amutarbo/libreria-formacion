<div class="search-page">
  <section class="search-section">
    <h2>Componente search básico</h2>
    <dcx-ng-search
      (searchChange)="onSearchChange($event)"
      (searchOutput)="onSearch($event)"
    />
  </section>

  <section class="search-section">
    <h2>Search con clear icon</h2>
    <p class="description">El botón de limpiar aparece cuando hay texto en el input.</p>
    <dcx-ng-search
      [showClear]="true"
      placeholder="Buscar con botón limpiar..."
      helperText="El icono X aparece cuando escribes"
      (searchOutput)="onSearch($event)"
    />
  </section>

  <section class="search-section">
    <h2>Search con dropdown inteligente</h2>
    <p class="description">El dropdown filtra personas en tiempo real mientras escribes. Incluye botón de limpiar.</p>
    <dcx-ng-search
      [dropdown]="true"
      [showClear]="true"
      [items]="personItems()"
      placeholder="Buscar personas..."
      helperText="Escribe para filtrar o selecciona del dropdown"
      (searchOutput)="onSearch($event)"
      (itemSelected)="onItemSelected($event)"
    />
    @if (selectedItem()) {
      <div class="selected-info">
        <strong>Item seleccionado:</strong> {{ selectedItem()?.label }}
      </div>
    }
  </section>

  <section class="search-section">
    <h2>Tamaños del componente</h2>
    <div class="size-examples">
      <div class="size-example">
        <h3>Tamaño Small</h3>
        <dcx-ng-search
          [size]="'s'"
          [showClear]="true"
          [dropdown]="true"
          [items]="personItems()"
          placeholder="Búsqueda pequeña..."
        />
      </div>
      <div class="size-example">
        <h3>Tamaño Medium (default)</h3>
        <dcx-ng-search
          [size]="'m'"
          [showClear]="true"
          [dropdown]="true"
          [items]="personItems()"
          placeholder="Búsqueda mediana..."
        />
      </div>
      <div class="size-example">
        <h3>Tamaño Large</h3>
        <dcx-ng-search
          [size]="'l'"
          [showClear]="true"
          [dropdown]="true"
          [items]="personItems()"
          placeholder="Búsqueda grande..."
        />
      </div>
    </div>
  </section>

  <section class="search-section">
    <h2>Search con autocomplete y validación</h2>
    <p class="description">Autocomplete con dropdown que valida que el campo no esté vacío.</p>
    <dcx-ng-search
      [dropdown]="true"
      [items]="personItems()"
      [invalid]="!searchValue()"
      [showClear]="true"
      placeholder="Buscar personas..."
      errorMessage="Este campo es requerido"
      (searchChange)="onSearchValueChange($event)"
      (searchOutput)="onSearch($event)"
      (itemSelected)="onItemSelected($event)"
    />
  </section>

  <section class="search-section">
    <h2>Search con validación dinámica (mínimo 3 caracteres)</h2>
    <p class="description">El estado invalid aparece automáticamente cuando no se cumpla la validación regex.</p>
    <dcx-ng-search
      [validationRegex]="minThreeCharsRegex"
      [showClear]="true"
      placeholder="Escribe al menos 3 caracteres..."
      errorMessage="Por favor, introduce al menos 3 caracteres"
      helperText="Mínimo 3 caracteres requeridos"
      (searchOutput)="onSearch($event)"
    />
  </section>

  <section class="search-section">
    <h2>Componente search disabled</h2>
    <dcx-ng-search
      [disabled]="true"
      placeholder="Campo deshabilitado"
    />
  </section>

  @if (lastSearch()) {
    <section class="search-section">
      <h3>Última búsqueda: "{{ lastSearch() }}"</h3>
      <ul>
        @for (result of searchResults(); track $index) {
          <li>{{ result }}</li>
        }
      </ul>
    </section>
  }
</div>

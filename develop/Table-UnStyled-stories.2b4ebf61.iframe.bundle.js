(self.webpackChunk_dcx_ng_components_source=self.webpackChunk_dcx_ng_components_source||[]).push([[3226],{"./libs/dcx-ng-lib/src/lib/dcx-ng-components/dcx-ng-contextMenu/dcx-ng-contextMenu.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E:()=>ContextMenuComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var dcx_ng_contextMenu_componentngResource=__webpack_require__("./libs/dcx-ng-lib/src/lib/dcx-ng-components/dcx-ng-contextMenu/dcx-ng-contextMenu.component.scss?ngResource"),dcx_ng_contextMenu_componentngResource_default=__webpack_require__.n(dcx_ng_contextMenu_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs");let ContextMenuComponent=class ContextMenuComponent{eRef;items=[];visible=!1;position={x:0,y:0};closed=new core.EventEmitter;constructor(eRef){this.eRef=eRef}onClickOutside(event){this.eRef.nativeElement.contains(event.target)||this.hide()}show(x,y){this.position={x,y},this.visible=!0}hide(){this.visible=!1,this.closed.emit()}onItemClick(item){item.action(),this.hide()}static ctorParameters=()=>[{type:core.ElementRef}];static propDecorators={items:[{type:core.Input}],visible:[{type:core.Input}],position:[{type:core.Input}],closed:[{type:core.Output}],onClickOutside:[{type:core.HostListener,args:["document:click",["$event"]]}]}};ContextMenuComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"dcx-ng-context-menu",standalone:!0,imports:[common.CommonModule],template:'<div\n  class="context-menu"\n  *ngIf="visible"\n  [ngStyle]="{ \'left.px\': position.x, \'top.px\': position.y }"\n  (click)="$event.stopPropagation()"\n>\n  <ul>\n    <li *ngFor="let item of items" (click)="item.action()">{{ item.label }}</li>\n  </ul>\n</div>\n',styles:[dcx_ng_contextMenu_componentngResource_default()]}),(0,tslib_es6.Sn)("design:paramtypes",[core.ElementRef])],ContextMenuComponent)},"./libs/dcx-ng-lib/src/lib/dcx-ng-components/dcx-ng-table/dcx-ng-table.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{K:()=>DcxNgTableComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var SortType,dcx_ng_table_componentngResource=__webpack_require__("./libs/dcx-ng-lib/src/lib/dcx-ng-components/dcx-ng-table/dcx-ng-table.component.scss?ngResource"),dcx_ng_table_componentngResource_default=__webpack_require__.n(dcx_ng_table_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),dcx_ng_contextMenu_component=__webpack_require__("./libs/dcx-ng-lib/src/lib/dcx-ng-components/dcx-ng-contextMenu/dcx-ng-contextMenu.component.ts");!function(SortType){SortType.Ascending="ascending",SortType.Descending="descending",SortType.None="none"}(SortType||(SortType={}));let DcxNgTableComponent=class DcxNgTableComponent{headers;rows;showGrid=!1;showStripped=!1;scroll=!1;scrollHeight="320px";headerTemplate;cellTemplate;menuCellTemplate;data=[];rowActions=null;sortChange=new core.EventEmitter;sort=(0,core.signal)({key:null,dir:null});menuItems=[];menuVisible=!1;menuPosition={x:0,y:0};currentRow;ngOnInit(){this.ensureRowIds()}sortedRows(){const _rows=[...this.rows],{key,dir}=this.sort();if(!key||!dir)return _rows;const header=this.headers.find((h=>h.key===key)),type=header?.type??this.inferType(_rows,key);return _rows.sort(((a,b)=>this.compare(a?.[key],b?.[key],type))),"desc"===dir&&_rows.reverse(),_rows}onHeaderClick(header){if(!header.sortable)return;let nextDirection;if(this.sort().key!==header.key)nextDirection="asc";else switch(this.sort().dir){case"asc":nextDirection="desc";break;case"desc":nextDirection=null;break;default:nextDirection="asc"}this.sort.set({key:header.key??null,dir:nextDirection}),this.sortChange.emit(this.sort())}ariaSort(header){const currentSort=this.sort();return currentSort.key===header.key&&currentSort.dir?"asc"===currentSort.dir?SortType.Ascending:SortType.Descending:SortType.None}openMenu(event,rowData){event.stopPropagation(),this.currentRow=rowData;const rect=event.currentTarget.getBoundingClientRect();this.menuPosition={x:rect.left-160-6,y:rect.top+window.scrollY},this.menuItems=this.rowActions?this.rowActions(rowData):[{label:"Editar",action:()=>this.onEdit(rowData)},{label:"Eliminar",action:()=>this.onDelete(rowData)}],this.menuVisible=!0}onEdit(rowData){this.menuVisible=!1}onDelete(rowData){this.menuVisible=!1}ensureRowIds(){this.rows.forEach(((row,index)=>{void 0!==row.id&&null!==row.id||(row.id=index)}))}inferType(rows,key){const first=rows.find((r=>null!=r?.[key]))?.[key];return"number"==typeof first?"number":"string"}compare(leftValue,rightValue,valueType){const leftIsNull=null==leftValue,rightIsNull=null==rightValue;if(leftIsNull&&rightIsNull)return 0;if(leftIsNull)return 1;if(rightIsNull)return-1;if("number"===valueType){const leftNumber=Number(leftValue),rightNumber=Number(rightValue),leftIsNaN=Number.isNaN(leftNumber),rightIsNaN=Number.isNaN(rightNumber);return leftIsNaN&&rightIsNaN?0:leftIsNaN?1:rightIsNaN?-1:leftNumber===rightNumber?0:leftNumber<rightNumber?-1:1}const leftText=String(leftValue),rightText=String(rightValue);return leftText.localeCompare(rightText,void 0,{sensitivity:"base",numeric:!0})}static propDecorators={headers:[{type:core.Input,args:[{required:!0}]}],rows:[{type:core.Input,args:[{required:!0}]}],showGrid:[{type:core.Input}],showStripped:[{type:core.Input}],scroll:[{type:core.Input}],scrollHeight:[{type:core.Input}],headerTemplate:[{type:core.Input}],cellTemplate:[{type:core.Input}],menuCellTemplate:[{type:core.Input}],data:[{type:core.Input}],rowActions:[{type:core.Input}],sortChange:[{type:core.Output}]}};DcxNgTableComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"dcx-ng-table",standalone:!0,imports:[common.CommonModule,dcx_ng_contextMenu_component.E],template:'<div\n  class="table-wrapper"\n  [class.scroll]="scroll"\n  [style.max-height]="scroll ? scrollHeight : null"\n>\n  <table [class.grid]="showGrid" [class.striped]="showStripped">\n    <thead>\n      <tr>\n        @for (header of headers; track header.key) {\n          <th\n            scope="col"\n            (click)="onHeaderClick(header)"\n            (keydown.enter)="onHeaderClick(header)"\n            (keydown.space)="onHeaderClick(header); $event.preventDefault()"\n            [class.sortable]="header.sortable"\n            [attr.aria-sort]="ariaSort(header)"\n            [attr.tabindex]="header.sortable ? 0 : null"\n          >\n            <ng-container\n              *ngTemplateOutlet="headerTemplate || defaultHeaderTpl; context: { $implicit: header }"\n            ></ng-container>\n          </th>\n        }\n\n        <th class="menu-col" scope="col"></th>\n      </tr>\n    </thead>\n\n    <tbody>\n      @if (sortedRows().length === 0) {\n        <tr>\n          <td [attr.colspan]="headers.length + 1" class="empty-cell">\n            No hay datos\n          </td>\n        </tr>\n      } @else {\n        @for (row of sortedRows(); track row.id) {\n          <tr class="table-row">\n            @for (header of headers; track header.key) {\n              <td>\n                <ng-container\n                  *ngTemplateOutlet="cellTemplate || defaultCellTpl; context: { $implicit: row, key: header.key }"\n                ></ng-container>\n              </td>\n            }\n            <td class="menu-col">\n              <ng-container\n                *ngTemplateOutlet="menuCellTemplate || defaultMenuCellTpl; context: { $implicit: row, index: $index }"\n              ></ng-container>\n            </td>\n          </tr>\n        }\n      }\n    </tbody>\n  </table>\n</div>\n\n<ng-template #defaultHeaderTpl let-header>\n  <strong>{{ header.name }}</strong>\n  @if (header.sortable) {\n    <span class="sort-indicator" aria-hidden="true">\n      @if (ariaSort(header) === \'ascending\') {\n        ▲\n      } @else if (ariaSort(header) === \'descending\') {\n        ▼\n      } @else {\n        ↕\n      }\n    </span>\n  }\n</ng-template>\n\n<ng-template #defaultCellTpl let-row let-key="key">\n  {{ row?.[key] }}\n</ng-template>\n\n<ng-template #defaultMenuCellTpl let-rowData>\n  <button\n    type="button"\n    class="btn icon"\n    title="Context menu (TODO)"\n    (click)="openMenu($event, rowData)"\n  >\n    ⋮\n  </button>\n</ng-template>\n\n<dcx-ng-context-menu\n  [items]="menuItems"\n  [visible]="menuVisible"\n  [position]="menuPosition"\n  (closed)="menuVisible = false"\n>\n</dcx-ng-context-menu>\n',styles:[dcx_ng_table_componentngResource_default()]})],DcxNgTableComponent)},"./node_modules/css-loader/dist/runtime/noSourceMaps.js":module=>{"use strict";module.exports=function(i){return i[1]}},"./libs/dcx-ng-lib/src/lib/stories/Table/UnStyled.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Empty:()=>Empty,Striped:()=>Striped,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _home_runner_work_libreria_formacion_libreria_formacion_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),_storybook_test__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/test/dist/index.mjs"),_dcx_ng_components_dcx_ng_table_dcx_ng_table_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./libs/dcx-ng-lib/src/lib/dcx-ng-components/dcx-ng-table/dcx-ng-table.component.ts");const ActionsData={sortChange:(0,_storybook_test__WEBPACK_IMPORTED_MODULE_0__.fn)()},__WEBPACK_DEFAULT_EXPORT__={title:"DCXLibrary/Table/Without style",component:_dcx_ng_components_dcx_ng_table_dcx_ng_table_component__WEBPACK_IMPORTED_MODULE_1__.K,tags:["autodocs"],argTypes:{showGrid:{control:"boolean"},showStripped:{control:"boolean"},scroll:{control:"boolean"},scrollHeight:{control:"text"},headers:{control:!1},rows:{control:!1},sortChange:{action:"sortChange"}}},Striped={args:{headers:[{name:"ID",key:"id",type:"number",sortable:!0},{name:"Nombre",key:"name",type:"string",sortable:!0},{name:"Estado",key:"status",sortable:!0}],rows:[{id:3,name:"Litio",status:"ok"},{id:1,name:"Hidrógeno",status:"ok"},{id:2,name:"Helio",status:"pendiente"},{id:5,name:"Boro",status:"error"},{id:4,name:"Berilio",status:"ok"},{id:6,name:"Carbono",status:"ok"}],showStripped:!0,scroll:!1,scrollHeight:"220px",sortChange:ActionsData.sortChange},play:(_ref=(0,_home_runner_work_libreria_formacion_libreria_formacion_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.A)((function*({canvasElement}){const canvas=(0,_storybook_test__WEBPACK_IMPORTED_MODULE_0__.ux)(canvasElement),nameHeader=yield canvas.findByRole("columnheader",{name:/Nombre/i});yield _storybook_test__WEBPACK_IMPORTED_MODULE_0__.Q4.click(nameHeader),yield(0,_storybook_test__WEBPACK_IMPORTED_MODULE_0__.E3)(nameHeader).toHaveAttribute("aria-sort","ascending"),yield _storybook_test__WEBPACK_IMPORTED_MODULE_0__.Q4.click(nameHeader),yield(0,_storybook_test__WEBPACK_IMPORTED_MODULE_0__.E3)(nameHeader).toHaveAttribute("aria-sort","descending"),yield _storybook_test__WEBPACK_IMPORTED_MODULE_0__.Q4.click(nameHeader),yield(0,_storybook_test__WEBPACK_IMPORTED_MODULE_0__.E3)(nameHeader).toHaveAttribute("aria-sort","none")})),function play(_x){return _ref.apply(this,arguments)})};var _ref;const Empty={args:{headers:[{name:"ID",key:"id",type:"number"},{name:"Nombre",key:"name",type:"string"}],rows:[],showStripped:!0,scroll:!1,sortChange:ActionsData.sortChange}},__namedExportsOrder=["Striped","Empty"];Striped.parameters={...Striped.parameters,docs:{...Striped.parameters?.docs,source:{originalSource:"{\n  args: {\n    headers: [{\n      name: 'ID',\n      key: 'id',\n      type: 'number',\n      sortable: true\n    }, {\n      name: 'Nombre',\n      key: 'name',\n      type: 'string',\n      sortable: true\n    }, {\n      name: 'Estado',\n      key: 'status',\n      sortable: true\n    }],\n    rows: [{\n      id: 3,\n      name: 'Litio',\n      status: 'ok'\n    }, {\n      id: 1,\n      name: 'Hidrógeno',\n      status: 'ok'\n    }, {\n      id: 2,\n      name: 'Helio',\n      status: 'pendiente'\n    }, {\n      id: 5,\n      name: 'Boro',\n      status: 'error'\n    }, {\n      id: 4,\n      name: 'Berilio',\n      status: 'ok'\n    }, {\n      id: 6,\n      name: 'Carbono',\n      status: 'ok'\n    }],\n    showStripped: true,\n    scroll: false,\n    scrollHeight: '220px',\n    sortChange: ActionsData.sortChange\n  },\n  // Test opcional: verifica accesibilidad del aria-sort en \"Nombre\"\n  play: async ({\n    canvasElement\n  }) => {\n    const canvas = within(canvasElement);\n    const nameHeader = await canvas.findByRole('columnheader', {\n      name: /Nombre/i\n    });\n    await userEvent.click(nameHeader);\n    await expect(nameHeader).toHaveAttribute('aria-sort', 'ascending');\n    await userEvent.click(nameHeader);\n    await expect(nameHeader).toHaveAttribute('aria-sort', 'descending');\n    await userEvent.click(nameHeader);\n    await expect(nameHeader).toHaveAttribute('aria-sort', 'none');\n  }\n}",...Striped.parameters?.docs?.source},description:{story:"Striped + Sort (sin defaultSort; el 1er click pone ascendente)",...Striped.parameters?.docs?.description}}},Empty.parameters={...Empty.parameters,docs:{...Empty.parameters?.docs,source:{originalSource:"{\n  args: {\n    headers: [{\n      name: 'ID',\n      key: 'id',\n      type: 'number'\n    }, {\n      name: 'Nombre',\n      key: 'name',\n      type: 'string'\n    }],\n    rows: [],\n    showStripped: true,\n    scroll: false,\n    sortChange: ActionsData.sortChange\n  }\n}",...Empty.parameters?.docs?.source},description:{story:"Empty State",...Empty.parameters?.docs?.description}}}},"./libs/dcx-ng-lib/src/lib/dcx-ng-components/dcx-ng-contextMenu/dcx-ng-contextMenu.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".context-menu {\n  position: fixed;\n  background-color: var(--color-background, #ffffff);\n  border: 1px solid var(--color-border, #e5e7eb);\n  border-radius: var(--border-radius-md, 8px);\n  z-index: var(--z-index-dropdown, 1000);\n  min-width: 160px;\n  padding: var(--spacing-md, 8px) 0;\n  box-shadow: var(--shadow-lg, 0 10px 25px rgba(0, 0, 0, 0.1), 0 0 1px rgba(0, 0, 0, 0.06));\n  animation: slideIn var(--transition-fast, 150ms) ease-out;\n  backdrop-filter: blur(8px);\n  font-family: var(--font-family-base);\n}\n\n.context-menu ul {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.context-menu li {\n  padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);\n  font-size: var(--font-size-body-small, 14px);\n  font-weight: var(--font-weight-medium, 500);\n  color: var(--color-text-primary, #374151);\n  cursor: pointer;\n  transition: all var(--transition-normal, 250ms) var(--transition-timing, cubic-bezier(0.4, 0, 0.2, 1));\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs, 8px);\n  -webkit-user-select: none;\n          user-select: none;\n  line-height: var(--line-height-tight, 1.2);\n}\n.context-menu li:hover {\n  background-color: var(--color-surface-hover, #f3f4f6);\n  color: var(--color-text-primary, #111827);\n  padding-left: calc(var(--spacing-md, 16px) + var(--spacing-xs, 8px));\n}\n.context-menu li:active {\n  background-color: var(--color-surface-active, #e5e7eb);\n}\n\n.context-menu li + li {\n  border-top: 1px solid #f3f4f6;\n}\n\n.context-menu li:first-child {\n  border-radius: 8px 8px 0 0;\n}\n\n.context-menu li:last-child {\n  border-radius: 0 0 8px 8px;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/dcx-ng-lib/src/lib/dcx-ng-components/dcx-ng-table/dcx-ng-table.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".table-wrapper {\n  width: 100%;\n  overflow: hidden;\n}\n.table-wrapper.scroll {\n  overflow: auto;\n}\n\ntable {\n  width: 100%;\n  border-collapse: collapse;\n}\ntable.grid td, table.grid th {\n  border: 1px solid var(--table-border, #e3e3e3);\n}\ntable.striped tbody tr:nth-child(odd) {\n  background: var(--table-striped, #fafafa);\n}\n\nthead th {\n  position: sticky;\n  top: 0;\n  z-index: 1;\n  background: var(--surface, #fff);\n  text-align: left;\n  padding: 0.5rem 0.75rem;\n  font-weight: 700;\n  line-height: 1.2;\n  border-bottom: 2px solid var(--table-divider, #e3e3e3);\n}\nthead th.sortable {\n  cursor: pointer;\n}\n\ntbody td {\n  padding: 0.5rem 0.75rem;\n  vertical-align: top;\n}\n\n.table-row:hover {\n  background: var(--table-row-hover, #f6f6f6);\n}\n\n.menu-col {\n  white-space: nowrap;\n  text-align: right;\n  width: 0.1%;\n}\n\n.sort-indicator {\n  margin-left: 0.375rem;\n  opacity: 0.7;\n}\n\n.btn.icon {\n  background: none;\n  border: none;\n  color: #555;\n  cursor: pointer;\n  padding: 0 0.25rem;\n  font: inherit;\n}\n\n.empty-cell {\n  text-align: center;\n  color: #777;\n  padding: 1rem;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);
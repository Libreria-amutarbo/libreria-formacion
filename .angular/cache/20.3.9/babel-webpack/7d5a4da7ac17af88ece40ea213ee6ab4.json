{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./dcx-ng-table.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./dcx-ng-table.component.scss?ngResource\";\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport { CommonModule } from '@angular/common';\nimport { Component, EventEmitter, Input, Output, signal, TemplateRef } from '@angular/core';\nexport var SortType;\n(function (SortType) {\n  SortType[\"Ascending\"] = \"ascending\";\n  SortType[\"Descending\"] = \"descending\";\n  SortType[\"None\"] = \"none\";\n})(SortType || (SortType = {}));\nlet DcxNgTableComponent = class DcxNgTableComponent {\n  headers;\n  rows;\n  showGrid = false;\n  showStripped = false;\n  scroll = false;\n  scrollHeight = '320px';\n  headerTemplate;\n  cellTemplate;\n  menuCellTemplate;\n  sortChange = new EventEmitter();\n  sort = signal({\n    key: null,\n    dir: null\n  });\n  ngOnInit() {\n    this.ensureRowIds();\n  }\n  sortedRows() {\n    const _rows = [...this.rows];\n    const {\n      key,\n      dir\n    } = this.sort();\n    if (!key || !dir) return _rows;\n    const header = this.headers.find(h => h.key === key);\n    const type = header?.type ?? this.inferType(_rows, key);\n    _rows.sort((a, b) => this.compare(a?.[key], b?.[key], type));\n    if (dir === 'desc') _rows.reverse();\n    return _rows;\n  }\n  onHeaderClick(header) {\n    if (!header.sortable) return;\n    let nextDirection;\n    if (this.sort().key !== header.key) {\n      nextDirection = 'asc';\n    } else {\n      switch (this.sort().dir) {\n        case 'asc':\n          nextDirection = 'desc';\n          break;\n        case 'desc':\n          nextDirection = null;\n          break;\n        default:\n          nextDirection = 'asc';\n      }\n    }\n    this.sort.set({\n      key: header.key ?? null,\n      dir: nextDirection\n    });\n    this.sortChange.emit(this.sort());\n  }\n  ariaSort(header) {\n    const currentSort = this.sort();\n    if (currentSort.key !== header.key || !currentSort.dir) return SortType.None;\n    return currentSort.dir === 'asc' ? SortType.Ascending : SortType.Descending;\n  }\n  ensureRowIds() {\n    this.rows.forEach((row, index) => {\n      if (row.id === undefined || row.id === null) {\n        row.id = index;\n      }\n    });\n  }\n  inferType(rows, key) {\n    const first = rows.find(r => r?.[key] !== null && r?.[key] !== undefined)?.[key];\n    return typeof first === 'number' ? 'number' : 'string';\n  }\n  compare(leftValue, rightValue, valueType) {\n    const leftIsNull = leftValue === null || leftValue === undefined;\n    const rightIsNull = rightValue === null || rightValue === undefined;\n    if (leftIsNull && rightIsNull) return 0;\n    if (leftIsNull) return 1;\n    if (rightIsNull) return -1;\n    if (valueType === 'number') {\n      const leftNumber = Number(leftValue);\n      const rightNumber = Number(rightValue);\n      const leftIsNaN = Number.isNaN(leftNumber);\n      const rightIsNaN = Number.isNaN(rightNumber);\n      if (leftIsNaN && rightIsNaN) return 0;\n      if (leftIsNaN) return 1;\n      if (rightIsNaN) return -1;\n      if (leftNumber === rightNumber) return 0;\n      return leftNumber < rightNumber ? -1 : 1;\n    }\n    const leftText = String(leftValue);\n    const rightText = String(rightValue);\n    return leftText.localeCompare(rightText, undefined, {\n      sensitivity: 'base',\n      numeric: true\n    });\n  }\n  static propDecorators = {\n    headers: [{\n      type: Input,\n      args: [{\n        required: true\n      }]\n    }],\n    rows: [{\n      type: Input,\n      args: [{\n        required: true\n      }]\n    }],\n    showGrid: [{\n      type: Input\n    }],\n    showStripped: [{\n      type: Input\n    }],\n    scroll: [{\n      type: Input\n    }],\n    scrollHeight: [{\n      type: Input\n    }],\n    headerTemplate: [{\n      type: Input\n    }],\n    cellTemplate: [{\n      type: Input\n    }],\n    menuCellTemplate: [{\n      type: Input\n    }],\n    sortChange: [{\n      type: Output\n    }]\n  };\n};\nDcxNgTableComponent = __decorate([Component({\n  selector: 'dcx-ng-table',\n  standalone: true,\n  imports: [CommonModule],\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], DcxNgTableComponent);\nexport { DcxNgTableComponent };","map":{"version":3,"names":["__decorate","__NG_CLI_RESOURCE__0","__NG_CLI_RESOURCE__1","CommonModule","Component","EventEmitter","Input","Output","signal","TemplateRef","SortType","DcxNgTableComponent","headers","rows","showGrid","showStripped","scroll","scrollHeight","headerTemplate","cellTemplate","menuCellTemplate","sortChange","sort","key","dir","ngOnInit","ensureRowIds","sortedRows","_rows","header","find","h","type","inferType","a","b","compare","reverse","onHeaderClick","sortable","nextDirection","set","emit","ariaSort","currentSort","None","Ascending","Descending","forEach","row","index","id","undefined","first","r","leftValue","rightValue","valueType","leftIsNull","rightIsNull","leftNumber","Number","rightNumber","leftIsNaN","isNaN","rightIsNaN","leftText","String","rightText","localeCompare","sensitivity","numeric","propDecorators","args","required","selector","standalone","imports","template","styles"],"sources":["C:/Users/lgarci16/Desktop/libreria-formacion/libs/dcx-ng-lib/src/lib/dcx-ng-components/dcx-ng-table/dcx-ng-table.component.ts"],"sourcesContent":["import { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./dcx-ng-table.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./dcx-ng-table.component.scss?ngResource\";\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport { CommonModule } from '@angular/common';\nimport { Component, EventEmitter, Input, Output, signal, TemplateRef, } from '@angular/core';\nexport var SortType;\n(function (SortType) {\n    SortType[\"Ascending\"] = \"ascending\";\n    SortType[\"Descending\"] = \"descending\";\n    SortType[\"None\"] = \"none\";\n})(SortType || (SortType = {}));\nlet DcxNgTableComponent = class DcxNgTableComponent {\n    headers;\n    rows;\n    showGrid = false;\n    showStripped = false;\n    scroll = false;\n    scrollHeight = '320px';\n    headerTemplate;\n    cellTemplate;\n    menuCellTemplate;\n    sortChange = new EventEmitter();\n    sort = signal({ key: null, dir: null });\n    ngOnInit() {\n        this.ensureRowIds();\n    }\n    sortedRows() {\n        const _rows = [...this.rows];\n        const { key, dir } = this.sort();\n        if (!key || !dir)\n            return _rows;\n        const header = this.headers.find(h => h.key === key);\n        const type = header?.type ?? this.inferType(_rows, key);\n        _rows.sort((a, b) => this.compare(a?.[key], b?.[key], type));\n        if (dir === 'desc')\n            _rows.reverse();\n        return _rows;\n    }\n    onHeaderClick(header) {\n        if (!header.sortable)\n            return;\n        let nextDirection;\n        if (this.sort().key !== header.key) {\n            nextDirection = 'asc';\n        }\n        else {\n            switch (this.sort().dir) {\n                case 'asc':\n                    nextDirection = 'desc';\n                    break;\n                case 'desc':\n                    nextDirection = null;\n                    break;\n                default:\n                    nextDirection = 'asc';\n            }\n        }\n        this.sort.set({ key: header.key ?? null, dir: nextDirection });\n        this.sortChange.emit(this.sort());\n    }\n    ariaSort(header) {\n        const currentSort = this.sort();\n        if (currentSort.key !== header.key || !currentSort.dir)\n            return SortType.None;\n        return currentSort.dir === 'asc' ? SortType.Ascending : SortType.Descending;\n    }\n    ensureRowIds() {\n        this.rows.forEach((row, index) => {\n            if (row.id === undefined || row.id === null) {\n                row.id = index;\n            }\n        });\n    }\n    inferType(rows, key) {\n        const first = rows.find(r => r?.[key] !== null && r?.[key] !== undefined)?.[key];\n        return typeof first === 'number' ? 'number' : 'string';\n    }\n    compare(leftValue, rightValue, valueType) {\n        const leftIsNull = leftValue === null || leftValue === undefined;\n        const rightIsNull = rightValue === null || rightValue === undefined;\n        if (leftIsNull && rightIsNull)\n            return 0;\n        if (leftIsNull)\n            return 1;\n        if (rightIsNull)\n            return -1;\n        if (valueType === 'number') {\n            const leftNumber = Number(leftValue);\n            const rightNumber = Number(rightValue);\n            const leftIsNaN = Number.isNaN(leftNumber);\n            const rightIsNaN = Number.isNaN(rightNumber);\n            if (leftIsNaN && rightIsNaN)\n                return 0;\n            if (leftIsNaN)\n                return 1;\n            if (rightIsNaN)\n                return -1;\n            if (leftNumber === rightNumber)\n                return 0;\n            return leftNumber < rightNumber ? -1 : 1;\n        }\n        const leftText = String(leftValue);\n        const rightText = String(rightValue);\n        return leftText.localeCompare(rightText, undefined, {\n            sensitivity: 'base',\n            numeric: true,\n        });\n    }\n    static propDecorators = {\n        headers: [{ type: Input, args: [{ required: true },] }],\n        rows: [{ type: Input, args: [{ required: true },] }],\n        showGrid: [{ type: Input }],\n        showStripped: [{ type: Input }],\n        scroll: [{ type: Input }],\n        scrollHeight: [{ type: Input }],\n        headerTemplate: [{ type: Input }],\n        cellTemplate: [{ type: Input }],\n        menuCellTemplate: [{ type: Input }],\n        sortChange: [{ type: Output }]\n    };\n};\nDcxNgTableComponent = __decorate([\n    Component({\n        selector: 'dcx-ng-table',\n        standalone: true,\n        imports: [CommonModule],\n        template: __NG_CLI_RESOURCE__0,\n        styles: [__NG_CLI_RESOURCE__1]\n    })\n], DcxNgTableComponent);\nexport { DcxNgTableComponent };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
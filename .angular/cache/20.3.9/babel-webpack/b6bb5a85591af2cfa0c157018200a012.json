{"ast":null,"code":"import { __decorate, __metadata } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./dcx-ng-input.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./dcx-ng-input.component.scss?ngResource\";\nimport { CommonModule } from '@angular/common';\nimport { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { FormControl, ReactiveFormsModule, Validators } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nexport var InputType;\n(function (InputType) {\n  InputType[\"TEXT\"] = \"text\";\n  InputType[\"NUMBER\"] = \"number\";\n  InputType[\"EMAIL\"] = \"email\";\n  InputType[\"PASSWORD\"] = \"password\";\n  InputType[\"SEARCH\"] = \"search\";\n  InputType[\"TEL\"] = \"tel\";\n  InputType[\"URL\"] = \"url\";\n})(InputType || (InputType = {}));\nexport var InputSize;\n(function (InputSize) {\n  InputSize[\"SMALL\"] = \"s\";\n  InputSize[\"MEDIUM\"] = \"m\";\n  InputSize[\"LARGE\"] = \"l\";\n  InputSize[\"EXTRA_LARGE\"] = \"xl\";\n  InputSize[\"AUTO\"] = \"auto\";\n})(InputSize || (InputSize = {}));\nlet DcxNgInputComponent = class DcxNgInputComponent {\n  type = InputType.TEXT;\n  placeholder = null;\n  size = InputSize.MEDIUM;\n  disabled = false;\n  required = false;\n  label = null;\n  errorMessages = [];\n  set value(val) {\n    if (this.inputControl) {\n      this.inputControl.setValue(val, {\n        emitEvent: false\n      });\n    }\n  }\n  valueChange = new EventEmitter();\n  inputControl = new FormControl('');\n  isFocused = false;\n  inputId;\n  destroy$ = new Subject();\n  constructor() {\n    this.inputId = `dcx-input-${Math.random().toString(36).substr(2, 9)}`;\n  }\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n  ngOnInit() {\n    this.setupFormControl();\n    this.setupValueChanges();\n  }\n  setupFormControl() {\n    const validators = [];\n    // Agregar validadores de formato primero para que tengan prioridad\n    if (this.type === InputType.EMAIL) {\n      validators.push(Validators.email);\n    }\n    if (this.type === InputType.NUMBER) {\n      // Patrón más estricto que no permite números terminados en punto decimal\n      validators.push(Validators.pattern(/^-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)$/));\n    }\n    // Agregar required al final para que los errores de formato tengan prioridad\n    if (this.required) {\n      validators.push(Validators.required);\n    }\n    this.inputControl = new FormControl('', validators);\n    if (this.disabled) {\n      this.inputControl.disable();\n    }\n  }\n  setupValueChanges() {\n    this.inputControl.valueChanges.pipe(takeUntil(this.destroy$)).subscribe(value => {\n      this.valueChange.emit(value);\n    });\n  }\n  ngOnChanges(changes) {\n    if (changes['required'] || changes['type'] || changes['disabled']) {\n      this.setupFormControl();\n    }\n  }\n  getErrorMessage() {\n    if (!this.inputControl.errors) {\n      return null;\n    }\n    const value = this.inputControl.value;\n    // Si hay contenido pero es inválido, priorizar errores de formato\n    if (value && value.trim() !== '') {\n      console.log(value);\n      if (this.inputControl.hasError('pattern') && this.type === InputType.NUMBER) {\n        return this.errorMessages.find(msg => msg.type === 'pattern')?.message || 'Formato numérico inválido';\n      }\n      if (this.inputControl.hasError('email')) {\n        return this.errorMessages.find(msg => msg.type === 'email')?.message || 'Formato correo inválido';\n      }\n    }\n    // Si está vacío o solo tiene espacios, mostrar error required\n    if (this.inputControl.hasError('required')) {\n      return this.errorMessages.find(msg => msg.type === 'required')?.message || 'Campo obligatorio';\n    }\n    return null;\n  }\n  static ctorParameters = () => [];\n  static propDecorators = {\n    type: [{\n      type: Input\n    }],\n    placeholder: [{\n      type: Input\n    }],\n    size: [{\n      type: Input\n    }],\n    disabled: [{\n      type: Input\n    }],\n    required: [{\n      type: Input\n    }],\n    label: [{\n      type: Input\n    }],\n    errorMessages: [{\n      type: Input\n    }],\n    valueChange: [{\n      type: Output\n    }]\n  };\n};\nDcxNgInputComponent = __decorate([Component({\n  selector: 'dcx-ng-input',\n  standalone: true,\n  imports: [CommonModule, ReactiveFormsModule],\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n}), __metadata(\"design:paramtypes\", [])], DcxNgInputComponent);\nexport { DcxNgInputComponent };","map":{"version":3,"names":["__decorate","__metadata","__NG_CLI_RESOURCE__0","__NG_CLI_RESOURCE__1","CommonModule","Component","EventEmitter","Input","Output","FormControl","ReactiveFormsModule","Validators","Subject","takeUntil","InputType","InputSize","DcxNgInputComponent","type","TEXT","placeholder","size","MEDIUM","disabled","required","label","errorMessages","value","val","inputControl","setValue","emitEvent","valueChange","isFocused","inputId","destroy$","constructor","Math","random","toString","substr","ngOnDestroy","next","complete","ngOnInit","setupFormControl","setupValueChanges","validators","EMAIL","push","email","NUMBER","pattern","disable","valueChanges","pipe","subscribe","emit","ngOnChanges","changes","getErrorMessage","errors","trim","console","log","hasError","find","msg","message","ctorParameters","propDecorators","selector","standalone","imports","template","styles"],"sources":["C:/Users/lgarci16/Desktop/libreria-formacion/libs/dcx-ng-lib/src/lib/dcx-ng-components/dcx-ng-input/dcx-ng-input.component.ts"],"sourcesContent":["import { __decorate, __metadata } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./dcx-ng-input.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./dcx-ng-input.component.scss?ngResource\";\nimport { CommonModule } from '@angular/common';\nimport { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { FormControl, ReactiveFormsModule, Validators } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nexport var InputType;\n(function (InputType) {\n    InputType[\"TEXT\"] = \"text\";\n    InputType[\"NUMBER\"] = \"number\";\n    InputType[\"EMAIL\"] = \"email\";\n    InputType[\"PASSWORD\"] = \"password\";\n    InputType[\"SEARCH\"] = \"search\";\n    InputType[\"TEL\"] = \"tel\";\n    InputType[\"URL\"] = \"url\";\n})(InputType || (InputType = {}));\nexport var InputSize;\n(function (InputSize) {\n    InputSize[\"SMALL\"] = \"s\";\n    InputSize[\"MEDIUM\"] = \"m\";\n    InputSize[\"LARGE\"] = \"l\";\n    InputSize[\"EXTRA_LARGE\"] = \"xl\";\n    InputSize[\"AUTO\"] = \"auto\";\n})(InputSize || (InputSize = {}));\nlet DcxNgInputComponent = class DcxNgInputComponent {\n    type = InputType.TEXT;\n    placeholder = null;\n    size = InputSize.MEDIUM;\n    disabled = false;\n    required = false;\n    label = null;\n    errorMessages = [];\n    set value(val) {\n        if (this.inputControl) {\n            this.inputControl.setValue(val, { emitEvent: false });\n        }\n    }\n    valueChange = new EventEmitter();\n    inputControl = new FormControl('');\n    isFocused = false;\n    inputId;\n    destroy$ = new Subject();\n    constructor() {\n        this.inputId = `dcx-input-${Math.random().toString(36).substr(2, 9)}`;\n    }\n    ngOnDestroy() {\n        this.destroy$.next();\n        this.destroy$.complete();\n    }\n    ngOnInit() {\n        this.setupFormControl();\n        this.setupValueChanges();\n    }\n    setupFormControl() {\n        const validators = [];\n        // Agregar validadores de formato primero para que tengan prioridad\n        if (this.type === InputType.EMAIL) {\n            validators.push(Validators.email);\n        }\n        if (this.type === InputType.NUMBER) {\n            // Patrón más estricto que no permite números terminados en punto decimal\n            validators.push(Validators.pattern(/^-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)$/));\n        }\n        // Agregar required al final para que los errores de formato tengan prioridad\n        if (this.required) {\n            validators.push(Validators.required);\n        }\n        this.inputControl = new FormControl('', validators);\n        if (this.disabled) {\n            this.inputControl.disable();\n        }\n    }\n    setupValueChanges() {\n        this.inputControl.valueChanges\n            .pipe(takeUntil(this.destroy$))\n            .subscribe(value => {\n            this.valueChange.emit(value);\n        });\n    }\n    ngOnChanges(changes) {\n        if (changes['required'] || changes['type'] || changes['disabled']) {\n            this.setupFormControl();\n        }\n    }\n    getErrorMessage() {\n        if (!this.inputControl.errors) {\n            return null;\n        }\n        const value = this.inputControl.value;\n        // Si hay contenido pero es inválido, priorizar errores de formato\n        if (value && value.trim() !== '') {\n            console.log(value);\n            if (this.inputControl.hasError('pattern') && this.type === InputType.NUMBER) {\n                return this.errorMessages.find(msg => msg.type === 'pattern')?.message || 'Formato numérico inválido';\n            }\n            if (this.inputControl.hasError('email')) {\n                return this.errorMessages.find(msg => msg.type === 'email')?.message || 'Formato correo inválido';\n            }\n        }\n        // Si está vacío o solo tiene espacios, mostrar error required\n        if (this.inputControl.hasError('required')) {\n            return this.errorMessages.find(msg => msg.type === 'required')?.message || 'Campo obligatorio';\n        }\n        return null;\n    }\n    static ctorParameters = () => [];\n    static propDecorators = {\n        type: [{ type: Input }],\n        placeholder: [{ type: Input }],\n        size: [{ type: Input }],\n        disabled: [{ type: Input }],\n        required: [{ type: Input }],\n        label: [{ type: Input }],\n        errorMessages: [{ type: Input }],\n        valueChange: [{ type: Output }]\n    };\n};\nDcxNgInputComponent = __decorate([\n    Component({\n        selector: 'dcx-ng-input',\n        standalone: true,\n        imports: [CommonModule, ReactiveFormsModule],\n        template: __NG_CLI_RESOURCE__0,\n        styles: [__NG_CLI_RESOURCE__1]\n    }),\n    __metadata(\"design:paramtypes\", [])\n], DcxNgInputComponent);\nexport { DcxNgInputComponent };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
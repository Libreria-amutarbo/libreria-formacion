<div class="accordion" [class]="getTransitionClass()">
  @for (item of items(); track item.id; let i = $index) {
    <div 
      class="accordion-item" 
      [class.disabled]="item.disabled"
      [class.expanded]="isExpanded(item.id)"
    >
        <dcx-ng-button
          class="accordion-header"
          [class.expanded]="isExpanded(item.id)"
          [label]="item.title"
          [disabled]="item.disabled ?? false"
          [iconStart]="item.icon || ''"
          iconEnd="chevron-down"
          [ariaLabel]="'Toggle ' + item.title"
          (buttonClick)="onButtonClick(item)"
          [attr.aria-expanded]="isExpanded(item.id)"
          [attr.aria-controls]="'accordion-content-' + item.id"
        >
        </dcx-ng-button>

        <div
          class="accordion-content-wrapper"
          [class.expanded]="isExpanded(item.id)"
          [class.disabled-content]="item.disabledContent"
          [attr.id]="'accordion-content-' + item.id"
          [attr.aria-labelledby]="'accordion-header-' + item.id"
          role="region"
        >
          <div class="accordion-content">
            @if (item.contentTemplate) {
              <ng-container *ngTemplateOutlet="item.contentTemplate"></ng-container>
            } @else {
              <div [innerHTML]="item.content"></div>
            }
          </div>
        </div>
      </div>
    }
  </div>

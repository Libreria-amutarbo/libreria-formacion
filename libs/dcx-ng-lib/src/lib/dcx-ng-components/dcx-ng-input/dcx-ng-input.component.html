@if (label()) {
  <label class="dcx-ng-input__label" [attr.for]="inputId" [attr.id]="labelId">
    {{ label() }}
    @if (required()) {
      <span class="dcx-ng-input__required">*</span>
    }
  </label>
}

<div class="dcx-ng-input__wrapper" [class.is-disabled]="disabled()">
  <input
    [class]="inputContolClasses()"
    [class.is-disabled]="disabled()"
    [class.is-invalid]="isInvalid()"
    [class.has-icon]="getInputIcon() !== null"
    [class.has-action]="showActionIcon()"
    [id]="id()"
    [name]="name()"
    [type]="displayType()"
    [placeholder]="placeholder()"
    [inputMode]="inputMode()"
    [readOnly]="readonly()"
    [disabled]="disabled()"
    [required]="required()"
    [autocomplete]="autocomplete()"
    [value]="value() ?? ''"
    [attr.aria-label]="label() ? null : ariaLabel()"
    [attr.aria-required]="required() ? 'true' : null"
    [attr.aria-invalid]="isInvalid()"
    [attr.aria-describedby]="describedBy()"
    (input)="onInput($event.target.value)"
    (focus)="focusEvent.emit()"
    (blur)="onBlur()"
    (keydown.enter)="enterPressed.emit()"
  />

  @if (showActionIcon()) {
    <dcx-ng-button
      class="dcx-ng-input__action-button"
      variant="icon-only"
      size="s"
      icon
      iconSize="l"
      [iconName]="getActionButtonIcon()"
      [ariaLabel]="getActionButtonAriaLabel()"
      [disabled]="disabled()"
      (buttonClick)="onActionButtonClick()"
    ></dcx-ng-button>
  }

  @if (isInvalid() && errorMessage()) {
    <div class="dcx-ng-input__error">
      <dcx-ng-icon [name]="errorIcon()"></dcx-ng-icon>

      <span>
        {{ errorMessage() }}
      </span>
    </div>
  }
</div>

(self.webpackChunk_dcx_ng_components_source=self.webpackChunk_dcx_ng_components_source||[]).push([[2843],{"./libs/dcx-ng-lib/src/lib/dcx-ng-components/dcx-ng-table/dcx-ng-table.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".table-wrapper {\n  width: 100%;\n  overflow: hidden;\n}\n.table-wrapper.scroll {\n  overflow: auto;\n}\n\ntable {\n  width: 100%;\n  border-collapse: collapse;\n}\ntable.grid td, table.grid th {\n  border: 1px solid var(--table-border, #e3e3e3);\n}\ntable.striped tbody tr:nth-child(odd) {\n  background: var(--table-striped, #fafafa);\n}\n\nthead th {\n  position: sticky;\n  top: 0;\n  z-index: 1;\n  background: var(--surface, #fff);\n  text-align: left;\n  padding: 0.5rem 0.75rem;\n  font-weight: 700;\n  line-height: 1.2;\n  border-bottom: 2px solid var(--table-divider, #e3e3e3);\n}\nthead th.sortable {\n  cursor: pointer;\n}\n\ntbody td {\n  padding: 0.5rem 0.75rem;\n  vertical-align: top;\n}\n\n.table-row:hover {\n  background: var(--table-row-hover, #f6f6f6);\n}\n\n.menu-col {\n  white-space: nowrap;\n  text-align: right;\n  width: 0.1%;\n}\n\n.sort-indicator {\n  margin-left: 0.375rem;\n  opacity: 0.7;\n}\n\n.btn.icon {\n  background: none;\n  border: none;\n  color: #555;\n  cursor: not-allowed;\n  padding: 0 0.25rem;\n  font: inherit;\n}\n\n.empty-cell {\n  text-align: center;\n  color: #777;\n  padding: 1rem;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/dcx-ng-lib/src/lib/dcx-ng-components/dcx-ng-table/dcx-ng-table.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{K:()=>DcxNgTableComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var SortType,dcx_ng_table_componentngResource=__webpack_require__("./libs/dcx-ng-lib/src/lib/dcx-ng-components/dcx-ng-table/dcx-ng-table.component.scss?ngResource"),dcx_ng_table_componentngResource_default=__webpack_require__.n(dcx_ng_table_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");!function(SortType){SortType.Ascending="ascending",SortType.Descending="descending",SortType.None="none"}(SortType||(SortType={}));let DcxNgTableComponent=class DcxNgTableComponent{headers;rows;showGrid=!1;showStripped=!1;scroll=!1;scrollHeight="320px";headerTemplate;cellTemplate;menuCellTemplate;sortChange=new core.EventEmitter;sort=(0,core.signal)({key:null,dir:null});ngOnInit(){this.ensureRowIds()}sortedRows(){const _rows=[...this.rows],{key,dir}=this.sort();if(!key||!dir)return _rows;const header=this.headers.find((h=>h.key===key)),type=header?.type??this.inferType(_rows,key);return _rows.sort(((a,b)=>this.compare(a?.[key],b?.[key],type))),"desc"===dir&&_rows.reverse(),_rows}onHeaderClick(header){if(!header.sortable)return;let nextDirection;if(this.sort().key!==header.key)nextDirection="asc";else switch(this.sort().dir){case"asc":nextDirection="desc";break;case"desc":nextDirection=null;break;default:nextDirection="asc"}this.sort.set({key:header.key??null,dir:nextDirection}),this.sortChange.emit(this.sort())}ariaSort(header){const currentSort=this.sort();return currentSort.key===header.key&&currentSort.dir?"asc"===currentSort.dir?SortType.Ascending:SortType.Descending:SortType.None}ensureRowIds(){this.rows.forEach(((row,index)=>{void 0!==row.id&&null!==row.id||(row.id=index)}))}inferType(rows,key){const first=rows.find((r=>null!=r?.[key]))?.[key];return"number"==typeof first?"number":"string"}compare(leftValue,rightValue,valueType){const leftIsNull=null==leftValue,rightIsNull=null==rightValue;if(leftIsNull&&rightIsNull)return 0;if(leftIsNull)return 1;if(rightIsNull)return-1;if("number"===valueType){const leftNumber=Number(leftValue),rightNumber=Number(rightValue),leftIsNaN=Number.isNaN(leftNumber),rightIsNaN=Number.isNaN(rightNumber);return leftIsNaN&&rightIsNaN?0:leftIsNaN?1:rightIsNaN?-1:leftNumber===rightNumber?0:leftNumber<rightNumber?-1:1}const leftText=String(leftValue),rightText=String(rightValue);return leftText.localeCompare(rightText,void 0,{sensitivity:"base",numeric:!0})}static propDecorators={headers:[{type:core.Input,args:[{required:!0}]}],rows:[{type:core.Input,args:[{required:!0}]}],showGrid:[{type:core.Input}],showStripped:[{type:core.Input}],scroll:[{type:core.Input}],scrollHeight:[{type:core.Input}],headerTemplate:[{type:core.Input}],cellTemplate:[{type:core.Input}],menuCellTemplate:[{type:core.Input}],sortChange:[{type:core.Output}]}};DcxNgTableComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"dcx-ng-table",standalone:!0,imports:[common.CommonModule],template:'<div\r\n  class="table-wrapper"\r\n  [class.scroll]="scroll"\r\n  [style.max-height]="scroll ? scrollHeight : null"\r\n>\r\n  <table [class.grid]="showGrid" [class.striped]="showStripped">\r\n    <thead>\r\n      <tr>\r\n        @for (header of headers; track header.key) {\r\n          <th\r\n            scope="col"\r\n            (click)="onHeaderClick(header)"\r\n            (keydown.enter)="onHeaderClick(header)"\r\n            (keydown.space)="onHeaderClick(header); $event.preventDefault()"\r\n            [class.sortable]="header.sortable"\r\n            [attr.aria-sort]="ariaSort(header)"\r\n            [attr.tabindex]="header.sortable ? 0 : null"\r\n          >\r\n            <ng-container\r\n              *ngTemplateOutlet="headerTemplate || defaultHeaderTpl; context: { $implicit: header }"\r\n            ></ng-container>\r\n          </th>\r\n        }\r\n\r\n        <th class="menu-col" scope="col"></th>\r\n      </tr>\r\n    </thead>\r\n\r\n    <tbody>\r\n      @if (sortedRows().length === 0) {\r\n        <tr>\r\n          <td [attr.colspan]="headers.length + 1" class="empty-cell">\r\n            No hay datos\r\n          </td>\r\n        </tr>\r\n      } @else {\r\n        @for (row of sortedRows(); track row.id) {\r\n          <tr class="table-row">\r\n            @for (header of headers; track header.key) {\r\n              <td>\r\n                <ng-container\r\n                  *ngTemplateOutlet="cellTemplate || defaultCellTpl; context: { $implicit: row, key: header.key }"\r\n                ></ng-container>\r\n              </td>\r\n            }\r\n            <td class="menu-col">\r\n              <ng-container\r\n                *ngTemplateOutlet="menuCellTemplate || defaultMenuCellTpl; context: { $implicit: row, index: $index }"\r\n              ></ng-container>\r\n            </td>\r\n          </tr>\r\n        }\r\n      }\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<ng-template #defaultHeaderTpl let-header>\r\n  <strong>{{ header.name }}</strong>\r\n  @if (header.sortable) {\r\n    <span class="sort-indicator" aria-hidden="true">\r\n      @if (ariaSort(header) === \'ascending\') {\r\n        ▲\r\n      } @else if (ariaSort(header) === \'descending\') {\r\n        ▼\r\n      } @else {\r\n        ↕\r\n      }\r\n    </span>\r\n  }\r\n</ng-template>\r\n\r\n<ng-template #defaultCellTpl let-row let-key="key">\r\n  {{ row?.[key] }}\r\n</ng-template>\r\n\r\n<ng-template #defaultMenuCellTpl>\r\n  <button\r\n    type="button"\r\n    class="btn icon"\r\n    title="Context menu (TODO)"\r\n    disabled\r\n    aria-disabled="true"\r\n  >\r\n    ⋮\r\n  </button>\r\n</ng-template>\r\n',styles:[dcx_ng_table_componentngResource_default()]})],DcxNgTableComponent)},"./libs/dcx-ng-lib/src/lib/stories/Table/ClassBased.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{GridScroll:()=>GridScroll,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var C_Users_lgarci16_Desktop_libreria_formacion_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),_storybook_test__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/test/dist/index.mjs"),_dcx_ng_components_dcx_ng_table_dcx_ng_table_component__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./libs/dcx-ng-lib/src/lib/dcx-ng-components/dcx-ng-table/dcx-ng-table.component.ts");const ActionsData={sortChange:(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.fn)(),menuClick:(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.fn)()},__WEBPACK_DEFAULT_EXPORT__={title:"DCXLibrary/Table/Class based",component:_dcx_ng_components_dcx_ng_table_dcx_ng_table_component__WEBPACK_IMPORTED_MODULE_2__.K,tags:["autodocs"],argTypes:{showGrid:{control:"boolean"},showStripped:{control:"boolean"},scroll:{control:"boolean"},scrollHeight:{control:"text"},headers:{control:!1},rows:{control:!1},headerTemplate:{control:!1},cellTemplate:{control:!1},menuCellTemplate:{control:!1},sortChange:{action:"sortChange"}},args:{showGrid:!0,showStripped:!1,scroll:!0,scrollHeight:"240px"}},GridScroll={render:args=>({props:{...args,onSort:ActionsData.sortChange,onMenu:ActionsData.menuClick},template:'\n      \x3c!-- Plantilla de celda: muestra \'—\' si no hay valor --\x3e\n      <ng-template #cellTpl let-row let-key="key">\n        <span [style.color]="row?.[key] == null ? \'#999\' : \'inherit\'">\n          {{ row?.[key] ?? \'—\' }}\n        </span>\n      </ng-template>\n\n      \x3c!-- Plantilla de menú contextual (demo) --\x3e\n      <ng-template #menuTpl let-row let-index="index">\n        <button type="button" (click)="onMenu({ row, index })" title="Context menu (demo)">\n          ⋮\n        </button>\n      </ng-template>\n\n      <dcx-ng-table\n        [headers]="headers"\n        [rows]="rows"\n        [showGrid]="showGrid"\n        [showStripped]="showStripped"\n        [scroll]="scroll"\n        [scrollHeight]="scrollHeight"\n        [cellTemplate]="cellTpl"\n        [menuCellTemplate]="menuTpl"\n        (sortChange)="onSort($event)"\n      ></dcx-ng-table>\n    '}),args:{headers:[{name:"Producto",key:"product",type:"string",sortable:!0},{name:"Categoría",key:"category",type:"string",sortable:!0},{name:"Precio",key:"price",type:"number",sortable:!0,defaultSort:"asc"},{name:"Stock",key:"stock",type:"number",sortable:!0}],rows:[{product:"Teclado",category:"Periféricos",price:29.99,stock:120},{product:"Ratón",category:"Periféricos",price:14.5,stock:340},{product:'Monitor 24"',category:"Pantallas",price:139,stock:45},{product:'Monitor 27"',category:"Pantallas",price:219,stock:18},{product:'Portátil 14"',category:"Equipos",price:799,stock:12},{product:'Portátil 16"',category:"Equipos",price:1199,stock:5},{product:"Dock USB-C",category:"Accesorios",price:69.9,stock:64},{product:"Hub USB",category:"Accesorios",price:19.9,stock:0}]},play:(_ref=(0,C_Users_lgarci16_Desktop_libreria_formacion_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)((function*({canvasElement}){const canvas=(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.ux)(canvasElement),priceHeader=yield canvas.findByRole("columnheader",{name:/Precio/i});yield _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.click(priceHeader),yield(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.E3)(priceHeader).toHaveAttribute("aria-sort","ascending"),yield _storybook_test__WEBPACK_IMPORTED_MODULE_1__.Q4.click(priceHeader),yield(0,_storybook_test__WEBPACK_IMPORTED_MODULE_1__.E3)(priceHeader).toHaveAttribute("aria-sort","descending")})),function play(_x){return _ref.apply(this,arguments)})};var _ref;const __namedExportsOrder=["GridScroll"];GridScroll.parameters={...GridScroll.parameters,docs:{...GridScroll.parameters?.docs,source:{originalSource:"{\n  render: args => ({\n    props: {\n      ...args,\n      onSort: ActionsData.sortChange,\n      onMenu: ActionsData.menuClick\n    },\n    template: `\n      \x3c!-- Plantilla de celda: muestra '—' si no hay valor --\x3e\n      <ng-template #cellTpl let-row let-key=\"key\">\n        <span [style.color]=\"row?.[key] == null ? '#999' : 'inherit'\">\n          {{ row?.[key] ?? '—' }}\n        </span>\n      </ng-template>\n\n      \x3c!-- Plantilla de menú contextual (demo) --\x3e\n      <ng-template #menuTpl let-row let-index=\"index\">\n        <button type=\"button\" (click)=\"onMenu({ row, index })\" title=\"Context menu (demo)\">\n          ⋮\n        </button>\n      </ng-template>\n\n      <dcx-ng-table\n        [headers]=\"headers\"\n        [rows]=\"rows\"\n        [showGrid]=\"showGrid\"\n        [showStripped]=\"showStripped\"\n        [scroll]=\"scroll\"\n        [scrollHeight]=\"scrollHeight\"\n        [cellTemplate]=\"cellTpl\"\n        [menuCellTemplate]=\"menuTpl\"\n        (sortChange)=\"onSort($event)\"\n      ></dcx-ng-table>\n    `\n  }),\n  args: {\n    headers: [{\n      name: 'Producto',\n      key: 'product',\n      type: 'string',\n      sortable: true\n    }, {\n      name: 'Categoría',\n      key: 'category',\n      type: 'string',\n      sortable: true\n    }, {\n      name: 'Precio',\n      key: 'price',\n      type: 'number',\n      sortable: true,\n      defaultSort: 'asc'\n    }, {\n      name: 'Stock',\n      key: 'stock',\n      type: 'number',\n      sortable: true\n    }],\n    rows: [{\n      product: 'Teclado',\n      category: 'Periféricos',\n      price: 29.99,\n      stock: 120\n    }, {\n      product: 'Ratón',\n      category: 'Periféricos',\n      price: 14.5,\n      stock: 340\n    }, {\n      product: 'Monitor 24\"',\n      category: 'Pantallas',\n      price: 139.0,\n      stock: 45\n    }, {\n      product: 'Monitor 27\"',\n      category: 'Pantallas',\n      price: 219.0,\n      stock: 18\n    }, {\n      product: 'Portátil 14\"',\n      category: 'Equipos',\n      price: 799.0,\n      stock: 12\n    }, {\n      product: 'Portátil 16\"',\n      category: 'Equipos',\n      price: 1199.0,\n      stock: 5\n    }, {\n      product: 'Dock USB-C',\n      category: 'Accesorios',\n      price: 69.9,\n      stock: 64\n    }, {\n      product: 'Hub USB',\n      category: 'Accesorios',\n      price: 19.9,\n      stock: 0\n    }]\n  },\n  // Test opcional: ordenación por \"Precio\" con clics (requiere @storybook/test)\n  play: async ({\n    canvasElement\n  }) => {\n    const canvas = within(canvasElement);\n    const priceHeader = await canvas.findByRole('columnheader', {\n      name: /Precio/i\n    });\n\n    // Primer click -> ascending\n    await userEvent.click(priceHeader);\n    await expect(priceHeader).toHaveAttribute('aria-sort', 'ascending');\n\n    // Segundo click -> descending\n    await userEvent.click(priceHeader);\n    await expect(priceHeader).toHaveAttribute('aria-sort', 'descending');\n  }\n}",...GridScroll.parameters?.docs?.source}}}},"./node_modules/css-loader/dist/runtime/noSourceMaps.js":module=>{"use strict";module.exports=function(i){return i[1]}}}]);